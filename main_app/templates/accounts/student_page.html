{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Student Requests</title>
  <link rel="stylesheet" href="{% static 'styles/student.css' %}">
</head>
<body>

<h2>Submit Student Request</h2>

<form method="POST" enctype="multipart/form-data" class="student-request-form">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Submit</button>
</form>

{% if message %}
<p class="message">{{ message }}</p>
{% endif %}

<h3>Your Requests</h3>
<table>
  <tr>
    <th>Subject</th>
    <th>Status</th>
    <th>Attachment</th>
    <th>Submitted At</th>
  </tr>
  {% for request in user_requests %}
  <tr>
    <td>{{ request.subject.name }}</td>
    <td>{{ request.status }}</td>
    <td><a href="{{ request.attachment.url }}" target="_blank">View</a></td>
    <td>{{ request.submitted_at|date:"Y-m-d H:i" }}</td>
  </tr>
  {% empty %}
  <tr><td colspan="4">No requests found</td></tr>
  {% endfor %}
</table>

<!-- Optional logout form if needed -->
<form action="{% url 'logout' %}" method="POST" class="logout-form">
  {% csrf_token %}
  <button type="submit">Logout</button>
</form>

</body>
</html>